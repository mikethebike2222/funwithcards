<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Vokabeltrainer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- TOP -->
  <header id="topbar" class="topbar">
    <div class="chips">
      <div class="chip"><span>⭐</span><b id="pointsChip">0</b></div>
      <div class="chip"><span>🪜</span><b id="levelChip">1</b></div>
      <div class="chip"><span>🔥</span><b id="streakChip">0 <small>d</small></b></div>
    </div>

    <div class="actions">
      <button id="modeToggle" class="pill secondary">Lernen</button>
      <button id="editToggle" class="pill ghost">✏️ <span data-i18n="edit">Bearbeiten</span></button>
      <button id="drawerToggle" class="fab mini" aria-label="Werkzeuge">≡</button>
    </div>
  </header>

  <!-- STAGE -->
  <main id="app" class="app">
    <section id="cardsArea" class="cards" aria-live="polite">
      <div id="cardA" class="card card-a" tabindex="0"></div>
      <div id="cardB" class="card card-b" tabindex="0"></div>
    </section>

    <!-- Eine (!) RF-Leiste -->
    <div id="rfBar" class="rfbar" aria-hidden="true">
      <button id="btnWrong" class="btn danger">❌ <span data-i18n="wrong">Falsch</span></button>
      <button id="btnRight" class="btn success">✅ <span data-i18n="right">Richtig</span></button>
    </div>

    <!-- Landscape-Badge -->
    <div id="boxBadge" class="boxbadge" aria-hidden="true">B1: 0</div>

    <!-- Inline-Editor (versteckt) -->
    <div id="editPanel" class="editpanel" hidden>
      <input id="editA" type="text" autocomplete="off" inputmode="text">
      <input id="editB" type="text" autocomplete="off" inputmode="text">
      <div class="row">
        <button id="saveEditBtn" class="btn success" data-i18n="save">Speichern</button>
        <button id="cancelEditBtn" class="btn secondary" data-i18n="cancel">Abbrechen</button>
      </div>
    </div>
  </main>

  <!-- Drawer -->
  <aside id="drawer" class="drawer" aria-hidden="true">
    <div class="drawer-head">
      <h2 data-i18n="tools">Werkzeuge</h2>
      <button id="drawerClose" class="pill ghost">×</button>
    </div>

    <section class="panel">
      <h3 data-i18n="progress">Fortschritt</h3>
      <div class="row">
        <button id="freshBtn" class="pill primary">+7</button>
      </div>
    </section>

    <section class="panel">
      <h3 data-i18n="uiLang">UI-Sprache</h3>
      <select id="langSelect">
        <option value="de">Deutsch</option>
        <option value="en">English</option>
        <option value="sv">Svenska</option>
        <option value="es">Español</option>
      </select>
    </section>

    <section class="panel">
      <h3 data-i18n="decks">Übungen</h3>
      <div class="row">
        <select id="deckSelect"></select>
        <button id="deckAddBtn" class="pill">＋</button>
        <button id="deckRenameBtn" class="pill">✏️</button>
        <button id="deckDeleteBtn" class="pill danger">🗑️</button>
      </div>
      <div class="row">
        <input id="sideALabel" placeholder="A">
        <input id="sideBLabel" placeholder="B">
        <button id="saveLabelsBtn" class="pill">✔︎</button>
      </div>
    </section>

    <section class="panel">
      <h3>CSV</h3>
      <input id="csvFile" type="file" accept=".csv,text/csv" />
      <small>UTF-8 / Win-1252 / ISO-8859-1; Komma/Semikolon</small>
    </section>

    <section class="panel">
      <h3 data-i18n="direction">Richtung</h3>
      <button id="toggleDirectionBtn" class="pill primary">A → B</button>
    </section>

    <!-- NEU: Balkendiagramm zum Box-Wechsel -->
    <section class="panel">
      <h3>Boxen</h3>
      <div id="boxBars" class="boxbars" role="list" aria-label="Boxübersicht"></div>
      <small id="boxBarsHint">Tippe auf eine Box zum Prüfen. Box 1 bleibt Lernen.</small>
    </section>

    <section class="panel">
      <h3 data-i18n="stats">Statistik</h3>
      <canvas id="pieChart" width="220" height="220"></canvas>
    </section>

    <section class="panel">
      <h3 data-i18n="manage">Verwalten</h3>
      <div class="row">
        <button id="deleteBtn" class="pill danger" data-i18n="delActive">Aktive Karte löschen</button>
        <button id="resetProgressBtn" class="pill secondary" data-i18n="resetProgress">Nur Fortschritt</button>
        <button id="resetAllBtn" class="pill danger" data-i18n="resetAll">Alles löschen</button>
      </div>
    </section>
  </aside>

  <script src="app.js"></script>
</body>
</html>
