<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <!-- Zoomen erlaubt -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vokabeltrainer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Header (Portrait & Desktop sichtbar) -->
  <header>
    <h1 id="appTitle">Vokabeltrainer</h1>
  </header>

  <!-- Gamification-Leiste (Portrait & Desktop) -->
  <div class="gbar">
    <div class="chip">⭐ <span id="pointsChip">0</span></div>
    <div class="chip">🎚️ <span id="levelChip">1</span></div>
    <div class="chip">🔥 <span id="streakChip">0</span>d</div>
  </div>

  <!-- Globale Controls (Portrait & Desktop) -->
  <div class="controls global">
    <button id="toggleModeBtn" class="pill secondary" type="button">Lernen</button>
    <button id="editBtn" class="pill" type="button">✏️ Bearbeiten</button>
    <button id="drawerToggleTop" class="pill ghost" type="button">☰ Werkzeug</button>
  </div>

  <!-- Hauptbereich -->
  <main id="mainArea">
    <!-- LERNEN -->
    <section id="learnPair" aria-live="polite">
      <div id="tileEs" class="tile front"></div>
      <div id="tileDe" class="tile back"></div>
    </section>

    <!-- PRÜFEN -->
    <section id="testPair" class="pair" aria-live="polite" hidden>
      <div id="testLeft"  class="tile front"></div>
      <div id="testRight" class="tile back muted"></div>
    </section>
    <div id="testActions" class="controls test-actions" hidden>
      <button id="btnWrong" class="pill danger" type="button">❌ Falsch</button>
      <button id="btnRight" class="pill success" type="button">✅ Richtig</button>
    </div>

    <!-- Box-Balken (Portrait & Desktop dauerhaft sichtbar; Landscape im Sheet) -->
    <div id="boxChart" aria-label="Box-Übersicht"></div>
  </main>

  <!-- Inline-Editor (immer versteckt bis Klick) -->
  <div id="editPanel" class="edit-panel" hidden>
    <input id="editA" type="text" placeholder="A" />
    <input id="editB" type="text" placeholder="B" />
    <div class="row">
      <button id="saveEditBtn"   class="pill success"  type="button">Speichern</button>
      <button id="cancelEditBtn" class="pill secondary" type="button">Abbrechen</button>
    </div>
  </div>

  <!-- Drawer / Werkzeuge -->
  <aside id="drawer" class="drawer" aria-hidden="true">
    <button id="drawerClose" title="Schließen" aria-label="Schließen">×</button>
    <h2 id="toolsTitle">Werkzeuge</h2>

    <!-- 1) UI-Sprache -->
    <section class="panel">
      <h3 id="langBlockTitle">UI-Sprache</h3>
      <div class="row">
        <label for="langSelect" id="langLabel" class="sr-only">UI-Sprache</label>
        <select id="langSelect">
          <option value="de">Deutsch</option>
          <option value="en">English</option>
          <option value="sv">Svenska</option>
          <option value="es">Español</option>
        </select>
      </div>
    </section>

    <!-- 2) Übungen (Decks) -->
    <section class="panel">
      <h3 id="decksBlockTitle">Übungen</h3>
      <div class="row">
        <label for="deckSelect" id="deckLabel" class="sr-only">Deck</label>
        <select id="deckSelect"></select>
      </div>
      <div class="row deck-actions">
        <button id="deckAddBtn"     class="pill ghost"     type="button" title="Neue Übung">➕</button>
        <button id="deckRenameBtn"  class="pill secondary" type="button" title="Umbenennen">✏️</button>
        <button id="deckDeleteBtn"  class="pill danger"    type="button" title="Löschen">🗑️</button>
      </div>
      <div class="row">
        <input type="text" id="sideALabelInput" placeholder="A" />
        <input type="text" id="sideBLabelInput" placeholder="B" />
        <button id="saveLabelsBtn" class="pill" type="button" title="Labels speichern">✔︎</button>
      </div>
    </section>

    <!-- 3) CSV Import / Export -->
    <section class="panel">
      <h3 id="importTitle">CSV Import</h3>
      <div class="row">
        <input type="file" id="csvFile" accept="text/csv,.csv" />
        <small class="muted">UTF-8 / Win-1252 / ISO-8859-1; , oder ;</small>
      </div>
      <div class="row">
        <button id="exportBtn" class="pill" type="button">Exportieren</button>
      </div>
      <h4 id="addCardTitle" class="subhead">Neue Karte hinzufügen</h4>
      <div class="row">
        <input type="text" id="inputSideA" placeholder="A" />
      </div>
      <div class="row">
        <input type="text" id="inputSideB" placeholder="B" />
      </div>
      <button id="addCardBtn" class="pill" type="button">Karte hinzufügen</button>
    </section>

    <!-- 4) Richtungswechsel (prominent) -->
    <section class="panel direction-panel">
      <h3 id="directionBlockTitle">Abfrage-Richtung</h3>
      <div class="row">
        <span id="directionBadge" class="direction-badge">A → B</span>
        <button id="toggleDirectionBtn" class="pill direction-btn" type="button" title="Richtung wechseln">Richtung wechseln</button>
      </div>
    </section>

    <!-- 5) Statistik – Tortendiagramm mit Boxen -->
    <section class="panel">
      <h3 id="statsTitle">Statistik</h3>
      <canvas id="pieChart" width="220" height="220" aria-label="Kartenverteilung"></canvas>
      <div id="legend" class="legend" aria-hidden="true"></div>
    </section>

    <!-- 6) Verwalten -->
    <section class="panel">
      <h3>Verwalten</h3>
      <div class="row manage-actions">
        <button id="deleteBtn"         class="pill danger"    type="button">Aktive Karte löschen</button>
        <button id="resetProgressBtn"  class="pill secondary" type="button">Nur Fortschritt löschen</button>
        <button id="resetAllBtn"       class="pill danger"    type="button">Kartendeck löschen</button>
      </div>
    </section>
  </aside>

  <!-- FAB für Drawer -->
  <button id="drawerToggle" title="Werkzeuge" aria-label="Werkzeuge">☰</button>

  <!-- Landscape: Fixes Panel (Status + Richtig/Falsch – nur nach Reveal) -->
  <div id="landHud">
    <div id="landInfo"><span id="landInfoText">B1: 0</span></div>
    <div class="land-actions" id="landActions" hidden>
      <button id="landWrong" class="pill danger" type="button">❌</button>
      <button id="landRight" class="pill success" type="button">✅</button>
    </div>
  </div>

  <!-- Bottom Sheet (Landscape) -->
  <div id="sheet" aria-hidden="true">
    <div id="sheetHandle" aria-label="Sheet öffnen/schließen"></div>
    <div id="sheetContent">
      <div class="sheet-row">
        <button id="freshBtn" class="pill fresh" type="button">+7</button>
        <!-- Toggle zeigt aktuellen Status -->
        <button id="landModeToggle" class="pill swap" type="button">Lernen</button>
      </div>
      <div id="boxChartSheet"></div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>

