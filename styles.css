/* ===============================
   Vokabeltrainer – styles.css
   =============================== */

:root{
  --header-bg:#111827;
  --text:#111827;
  --bg:#f9fafb;

  --chip:#2563eb;
  --ok:#176427;
  --warn:#8f1b2b;

  --accent:#0ea5e9;
  --accent-strong:#0369a1;

  --sheet-bg:#fff;
  --sheet-shadow:0 -20px 40px rgba(0,0,0,.16);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--text);
  background:var(--bg);
  display:flex;
  flex-direction:column;
}

/* Header */
.app-header{
  position:sticky; top:0; z-index:30;
  display:flex; align-items:center; justify-content:center; gap:10px;
  padding:10px 12px; background:var(--header-bg); color:#fff;
}
#appTitle{ margin:0; font-size:1.2rem; }
.mode-hint{ opacity:.85; }

/* Gamification */
.gbar{
  width:min(1100px,96%); margin:8px auto 6px;
  display:flex; gap:8px; flex-wrap:wrap; align-items:center;
}
.chip{ background:#111827; color:#fff; border-radius:999px; padding:6px 10px; font-size:12px; }

/* Global Controls */
.controls.global{
  width:min(1100px,96%);
  margin:4px auto 8px; display:flex; gap:10px; flex-wrap:wrap; justify-content:center;
}
.pill{ border-radius:999px; padding:10px 14px; border:0; cursor:pointer; }
.pill.ghost{ background:#e5e7eb; color:#111827; }
.pill.secondary{ background:#6b7280; color:#fff; }
.pill.success{ background:var(--ok); color:#fff; }
.pill.danger{ background:var(--warn); color:#fff; }

/* Main */
#mainArea{
  flex:1; display:flex; flex-direction:column; align-items:center; gap:10px; padding:10px 0 16px;
}

/* Karten (Portrait & Desktop) */
.tile{
  display:flex; align-items:center; justify-content:center;
  width:92%; min-height:28vh;
  border-radius:16px; background:#fff; box-shadow:0 6px 22px rgba(0,0,0,.12);
  padding:14px; text-align:center;
  /* Text-Qualität */
  font-size:28px; line-height:1.1;
  white-space:normal;
  word-break:normal;       /* kein Mid-Word Break */
  overflow-wrap:break-word;/* bricht an Leerzeichen */
  hyphens:none;            /* keine Silbentrennung */
}
#tileEs, #testLeft  { background:#dbeafe; }
#tileDe, #testRight { background:#fef3c7; }
.muted{ color:#6b7280; }

.controls.test-actions{
  display:flex; gap:10px; justify-content:center;
}
.test-actions[hidden]{ display:none !important; }

/* Box bar (Portrait & Desktop) */
#boxChart{
  width:100%; height:110px; background:#e5e7eb; border-top:1px solid #e5e7eb;
  display:flex; align-items:flex-end; justify-content:space-around;
}
.bar{ flex:1; margin:0 2px; min-height:5px; background:#3b82f6; cursor:pointer; border-radius:2px 2px 0 0; }
.bar.active{ outline:2px solid #111827; }

/* Inline editor */
.edit-panel{
  width:min(1100px,96%); margin:6px auto; padding:10px; border-radius:12px;
  background:#fff; box-shadow:0 2px 6px rgba(0,0,0,.12);
  display:flex; flex-direction:column; gap:8px;
}
.edit-panel input{
  width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; font-size:16px;
}
.edit-panel[hidden]{ display:none !important; }

/* Drawer */
.drawer{
  position:fixed; top:0; right:-100%; width:min(90vw,380px); height:100%;
  background:#fff; box-shadow:-16px 0 32px rgba(0,0,0,.12);
  padding:16px; z-index:100; transition:right .25s ease; overflow:auto;
}
.drawer.open{ right:0; }
#drawerClose{ position:sticky; top:0; align-self:flex-end; border:0; background:none; font-size:24px; padding:4px 8px; }
.panel{ background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px; margin:10px 0; }
.row{ display:flex; gap:8px; align-items:center; margin:8px 0; flex-wrap:wrap; }
input, select, button{ font-size:1rem; }
input[type="text"], select{ width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; }
.legend{ display:flex; gap:10px; align-items:center; margin:8px 0; font-size:.9rem; flex-wrap:wrap; }
.legend i{ display:inline-block; width:12px; height:12px; border-radius:2px; margin-right:6px; }

/* Direction panel */
.direction-panel{ border-color: var(--accent); box-shadow:0 0 0 3px rgba(14,165,233,.08) inset; }
.direction-badge{ background:var(--accent-strong); color:#fff; padding:6px 10px; border-radius:999px; }
.direction-btn{ background:var(--accent); color:#fff; }

/* FAB – Werkzeug */
#drawerToggle{
  position:fixed; right:12px; bottom:12px; z-index:120; width:56px; height:56px;
  border-radius:50%; border:0; background:#2563eb; color:#fff; font-size:26px;
  box-shadow:0 8px 24px rgba(37,99,235,.35);
}

/* =======================================
   Landscape (Touch): Vollbild-Layout
   ======================================= */
@media (orientation:landscape) and (pointer:coarse){
  header, .gbar, .controls.global, #boxChart { display:none !important; }
  body{ overflow:hidden; }

  /* Zwei Karten – strikt an Spaltenbreite */
  #mainArea{
    flex:1; width:100vw; height:100vh;
    padding: min(2vw, 20px);
    display:grid; grid-template-columns: 1fr 1fr;
    gap: min(2vw, 20px);
    align-items:center; justify-items:center; overflow:hidden;
  }

  #learnPair, #testPair{
    grid-column: 1 / -1; width:100%;
    display:grid; grid-template-columns: 1fr 1fr;
    gap: min(2vw, 20px); align-items:center;
  }

  #learnPair .tile, #testPair .tile{
    width: 100%; height: auto;
    aspect-ratio: 4 / 3;                 /* -> gleiche Größe */
    max-height: calc(100vh - 2*min(2vw, 20px));
    border-radius: 18px;
    font-size: clamp(22px, 4.2vw, 44px);
    line-height:1.08;
  }

  /* HUD */
  #landHud{
    position:fixed; top: calc(12px + env(safe-area-inset-top));
    right: calc(12px + env(safe-area-inset-right));
    display:flex; align-items:center; gap:10px; z-index:60;
  }
  #landInfo{ background:var(--chip); color:#fff; padding:6px 10px; border-radius:12px; font-size:.9rem; }
  .land-actions .pill{ padding:8px 10px; }

  /* Bottom-Sheet: Button unten mittig sichtbar */
  #sheet{
    position:fixed; left:50%; transform:translateX(-50%); bottom:0;
    width:min(92vw, 520px); max-height:70vh;
    border-top-left-radius:16px; border-top-right-radius:16px;
    background:var(--sheet-bg); box-shadow: var(--sheet-shadow);
    z-index:90; transition: transform .25s ease, bottom .25s ease;
    /* standard: geschlossen unter dem Rand */
    bottom: -60vh;
  }
  #sheet.open{ bottom: 0; }
  #sheetOpen{
    position:fixed; left:50%; transform:translate(-50%, 0);
    bottom: 10px; z-index:95;
    width:64px; height:64px; border-radius:50%; border:0;
    background:#0f172a; color:#fff; font-size:28px; line-height:1;
    box-shadow:0 8px 24px rgba(15,23,42,.35);
  }
  #sheetContent{ padding:12px; }
  .sheet-row{ display:flex; gap:10px; align-items:center; margin-bottom:8px; }
  #freshBtn.pill.fresh{ background:#10b981; color:#fff; }
  #landModeToggle.pill.swap{ background:#111827; color:#fff; }
  #boxChartSheet{
    width:100%; height:110px; background:#e5e7eb; border-top:1px solid #e5e7eb;
    display:flex; align-items:flex-end; justify-content:space-around; border-radius:10px; padding:8px 8px 0;
  }
  #boxChartSheet .bar{ flex:1; margin:0 2px; min-height:5px; background:#3b82f6; border-radius:2px 2px 0 0; cursor:pointer; }
  #boxChartSheet .bar.active{ outline:2px solid #111827; }
}

/* =======================================
   Prüfmodus – Animationsklassen
   ======================================= */
.test-anim{ will-change: transform, opacity; }
.out-up   { animation: outUp 220ms ease forwards; }
.out-down { animation: outDown 220ms ease forwards; }
.in-fade  { animation: inFade 180ms ease both; }

@keyframes outUp   { to { transform: translateY(-48px); opacity: 0; } }
@keyframes outDown { to { transform: translateY( 48px); opacity: 0; } }
@keyframes inFade  { from { opacity:0; transform: translateY(6px); }
                     to   { opacity:1; transform: translateY(0); } }

/* A11y */
.sr-only{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
