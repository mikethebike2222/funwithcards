/* === Grundstyles === */
* { box-sizing: border-box; }

html, body{
  height:100%;
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background:#f9fafb;
  color:#111827;
  display:flex;
  flex-direction:column;
  /* NEU: horizontales Scrollen hart verhindern */
  overflow-x:hidden;
  max-width: 100vw;
}

/* Header / Chips */
header{
  padding: 8px 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
#titleRow{ display:flex; align-items:center; gap:12px; }
.gbar{
  display:flex; gap:8px; align-items:center;
  flex-wrap:wrap;            /* NEU: darf umbrechen */
  min-width:0;               /* NEU: verhindert „Überstehen“ */
}
.chip{ background:#111827; color:#fff; border-radius:999px; padding:6px 10px; font-size:12px; display:flex; align-items:center; gap:6px; }
.chip span{ font-weight:700; }

/* Toggle/Buttons */
.btn{ border:0; border-radius:999px; padding:10px 14px; font-size:16px; min-height:44px; cursor:pointer; }
.btn.secondary{ background:#6b7280; color:#fff; }
.btn.ghost{ background:#e5e7eb; color:#111827; }

/* Hauptbereich */
#mainArea{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  width:100%;
  max-width:100vw;         /* NEU */
  padding:12px;
}

/* Kartencontainer Portrait */
#learnPair, #testPair{
  width:100%;
  max-width: 100vw;        /* NEU */
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
  margin:0 auto 12px;
  padding: 0 8px;          /* etwas Luft, bleibt aber in 100vw */
}

/* Karten */
.tile{
  width:100%;              /* NEU: kein 90% mehr */
  height: min(38vh, 44svh);
  background:#fff;
  border-radius:16px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:18px;
  overflow:hidden;         /* Sicherheitsgurt, kein Herauslaufen */
  /* Text-Basis – kein künstlicher Wortbruch */
  white-space: normal;
  word-break: normal;
  hyphens: none;
}
#tileEs, #testLeft { background:#dbeafe; }
#tileDe, #testRight{ background:#fef3c7; }

/* Prüf-Actions (unten) */
#testActions{
  display:flex; gap:12px; justify-content:center;
  position:sticky;
  bottom: calc(18px + env(safe-area-inset-bottom,0px));
  padding-bottom: calc(2px + env(safe-area-inset-bottom,0px));
  z-index:5;
}
#testActions .btn{ min-width:135px; font-weight:600; }
.btn.danger{ background:#8f1b2b; color:#fff; }
.btn.success{ background:#176427; color:#fff; }

/* LANDSCAPE – zwei Kacheln nebeneinander, sonst fast alles ausblenden */
@media (orientation:landscape){
  header{ display:none; }
  #mainArea{ padding: 10px 10px 0 10px; }
  #learnPair, #testPair{
    grid-template-columns:1fr 1fr;
    grid-auto-rows: 1fr;
    align-items:stretch;
    gap:14px;
  }
  .tile{
    height: calc(100vh - 28px - env(safe-area-inset-bottom,0px));
    max-height: 86vh;
  }
  #testActions{
    /* Unten sichtbar (deutlich über der iOS Home-Bar) */
    bottom: calc(24px + env(safe-area-inset-bottom,0px));
  }
}

/* Balkendiagramm (nur Portrait dauerhaft sichtbar; in Landscape über Menü) */
#boxChart{
  width:100%;
  max-width:100vw;       /* NEU */
  height:110px;
  background:#e5e7eb;
  border-radius:12px;
  display:flex; align-items:flex-end; justify-content:space-between;
  gap:6px; padding:8px;
}
.bar{ flex:1; min-width:10px; background:#3b82f6; border-radius:6px; height:12px; opacity:.85; }
.bar.active{ outline:3px solid #1d4ed8; }

/* Floating Action Button */
#drawerToggle{
  position:fixed; right:16px; bottom:16px;
  width:56px; height:56px; border-radius:50%;
  background:#2563eb; color:#fff; font-size:24px;
  display:flex; align-items:center; justify-content:center; border:0;
  z-index:10;
}

/* Bottom-Sheet (Werkzeuge) – wie gehabt */
.sheet{ position:fixed; left:0; right:0; bottom:-100%; transition:bottom .25s; background:#fff; border-radius:16px 16px 0 0; box-shadow:0 -12px 30px rgba(0,0,0,.14); padding:14px; z-index:20; max-height:80vh; overflow:auto; }
.sheet.open{ bottom:0; }
.sheet .row{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:10px; }
.sheet h3{ margin:12px 0 6px; }

/* Pie Chart + Legende */
#pieWrap{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
#pieChart{ width:220px; height:220px; }
#legend{ display:flex; gap:10px; flex-wrap:wrap; }
#legend span{ display:inline-flex; align-items:center; gap:6px; opacity:.85; font-size:14px; }
#legend i{ width:10px; height:10px; border-radius:2px; display:inline-block; }

/* Kleine Badges */
.badge{
  background:#2563eb; color:#fff; border-radius:999px;
  padding:6px 10px; font-size:13px; display:inline-flex; align-items:center; gap:6px;
}

/* Editor-Panel */
#editPanel{ display:none; gap:8px; flex-direction:column; padding:10px; }
#editPanel.show{ display:flex; }
#editPanel input{ width:100%; min-height:44px; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; font-size:16px; }

/* Muted Answer (vor dem Aufdecken) */
.muted{ color:rgba(0,0,0,.25); }

/* Animations */
@keyframes slideUpOut{ to{ transform:translateY(-12%); opacity:0; } }
@keyframes slideDownOut{ to{ transform:translateY(12%); opacity:0; } }
@keyframes fadeInCards{ from{opacity:0;} to{opacity:1;} }
.test-anim.out-up{ animation: slideUpOut .24s ease both; }
.test-anim.out-down{ animation: slideDownOut .24s ease both; }
.in-fade{ animation: fadeInCards .2s ease both; }

