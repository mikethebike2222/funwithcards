/* ===============================
   Vokabeltrainer – styles.css
   (Patch: hidden-Fix, Safe-Area, Landscape)
   =============================== */
:root{
  --text:#111827;
  --bg:#f9fafb;
  --chip:#111827;

  --ok:#176427;
  --warn:#8f1b2b;

  --accent:#0ea5e9;
  --accent-strong:#0369a1;

  --sheet-bg:#fff;
  --sheet-shadow:0 -18px 40px rgba(0,0,0,.18);

  --pad: min(2vw, 20px);
}

/* WICHTIG: Alles mit [hidden] NIE anzeigen */
[hidden] { display: none !important; }

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--text); background:var(--bg);
  display:flex; flex-direction:column;
}

/* Top (Gamification + Buttons) – Portrait/Desktop */
.top{ width:min(1100px,96%); margin:8px auto 0; }
.gbar{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
.chip{ background:var(--chip); color:#fff; padding:6px 10px; border-radius:999px; font-size:12px; }
.controls.global{ display:flex; gap:10px; margin:8px 0 4px; justify-content:center; }
.pill{ border-radius:999px; padding:10px 14px; border:0; cursor:pointer; }
.pill.ghost{ background:#e5e7eb; color:#111827; }
.pill.secondary{ background:#6b7280; color:#fff; }
.pill.success{ background:var(--ok); color:#fff; }
.pill.danger{ background:var(--warn); color:#fff; }
.small{ padding:6px 10px; font-size:.9rem; }

/* Main */
#mainArea{ flex:1; display:flex; flex-direction:column; align-items:center; gap:10px; padding:8px 0 16px; }

/* Karten – Portrait/Desktop (untereinander) */
#learnPair, #testPair{
  width:min(1100px,96%);
  display:grid; grid-template-columns:1fr; gap:10px;
}
.tile{
  display:flex; align-items:center; justify-content:center;
  width:100%; min-height:26vh;
  border-radius:16px; background:#fff; box-shadow:0 8px 24px rgba(0,0,0,.12);
  padding:14px; text-align:center;
  font-size:28px; line-height:1.1;
  white-space:normal; word-break:normal; overflow-wrap:break-word; hyphens:none;
}
#tileEs, #testLeft  { background:#dbeafe; }
#tileDe, #testRight { background:#fef3c7; }
.muted{ color:#6b7280; opacity:.9; }

.controls.test-actions{ display:flex; gap:10px; justify-content:center; }

/* Box-Balken (Portrait/Desktop sichtbar) */
#boxChart{
  width:100%; height:110px; background:#e5e7eb; border-top:1px solid #e5e7eb;
  display:flex; align-items:flex-end; justify-content:space-around;
}
.bar{ flex:1; margin:0 2px; min-height:5px; background:#3b82f6; cursor:pointer; border-radius:2px 2px 0 0; }
.bar.active{ outline:2px solid #111827; }

/* Editor */
.edit-panel{
  width:min(1100px,96%); margin:6px auto; padding:10px; border-radius:12px;
  background:#fff; box-shadow:0 2px 6px rgba(0,0,0,.12);
  display:flex; flex-direction:column; gap:8px;
}
.edit-panel input{ width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; font-size:16px; }

/* FAB */
#drawerToggle{
  position:fixed; right:calc(12px + env(safe-area-inset-right)); bottom:calc(12px + env(safe-area-inset-bottom));
  z-index:120; width:56px; height:56px;
  border-radius:50%; border:0; background:#2563eb; color:#fff; font-size:26px;
  box-shadow:0 8px 24px rgba(37,99,235,.35);
}

/* Bottom Sheet */
#sheet{
  position:fixed; left:0; right:0; bottom:-80svh; z-index:140;
  background:var(--sheet-bg); box-shadow:var(--sheet-shadow);
  border-top-left-radius:16px; border-top-right-radius:16px;
  transition: bottom .28s ease;
  max-height:80svh; display:flex; flex-direction:column;
}
#sheet.open{ bottom:0; }
#sheetHeader{ position:sticky; top:0; background:#fff; padding:10px 12px; display:flex; align-items:center; gap:8px; }
#sheetHeader h2{ margin:0; font-size:1.1rem; }
#sheetClose{ margin-left:auto; border:0; background:none; font-size:24px; }
.drag-handle{ width:42px; height:5px; border-radius:999px; background:#e5e7eb; margin:4px auto 8px; }
#sheetContent{ padding:10px 12px 16px; overflow:auto; }
.panel{ background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px; margin:10px 0; }
.row{ display:flex; gap:8px; align-items:center; margin:8px 0; flex-wrap:wrap; }
input, select, button{ font-size:1rem; }
input[type="text"], select{ width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; }
.legend{ display:flex; gap:10px; align-items:center; margin:8px 0; font-size:.9rem; flex-wrap:wrap; }
.legend i{ display:inline-block; width:12px; height:12px; border-radius:2px; margin-right:6px; }
.direction-panel{ border-color: var(--accent); box-shadow:0 0 0 3px rgba(14,165,233,.08) inset; }
.direction-badge{ background:var(--accent-strong); color:#fff; padding:6px 10px; border-radius:999px; }
.direction-btn{ background:var(--accent); color:#fff; }
#boxChartSheet{
  width:100%; height:110px; background:#e5e7eb; border-top:1px solid #e5e7eb;
  display:flex; align-items:flex-end; justify-content:space-around; border-radius:10px; padding:8px 8px 0;
}
#boxChartSheet .bar{ flex:1; margin:0 2px; min-height:5px; background:#3b82f6; border-radius:2px 2px 0 0; cursor:pointer; }

/* Landscape (Touch) – feste 2 Spalten, Safe-Area beachten */
@media (orientation:landscape) and (pointer:coarse){
  .top, #boxChart{ display:none !important; } /* nichts oben, kein Diagramm */
  body{ overflow:hidden; }

  #mainArea{
    flex:1; width:100vw; height:100svh; padding: var(--pad);
    display:flex; align-items:center; justify-content:center;
  }
  #learnPair, #testPair{
    width:100%; height: calc(100svh - 2*var(--pad));
    display:grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr; gap: var(--pad);
  }
  #learnPair .tile, #testPair .tile{
    height:100%;
    font-size: clamp(22px, 4.2vw, 44px);
    border-radius:18px;
  }

  /* HUD: oben links Toggle, rechts Box-Badge */
  #landHUD{
    position:fixed; top: calc(12px + env(safe-area-inset-top));
    left: calc(12px + env(safe-area-inset-left));
    display:flex; align-items:center; gap:10px; z-index:60;
  }
  .badge{ background:#2563eb; color:#fff; padding:6px 10px; border-radius:12px; }

  /* Test-Buttons rechts mittig, Safe-Area */
  #landActions{
    position:fixed; right: calc(12px + env(safe-area-inset-right));
    top: calc(50svh - 0.5 * env(safe-area-inset-bottom));
    transform: translateY(-50%); z-index:65;
    display:flex; flex-direction:column; gap:10px;
  }

  /* Sheet mittig im Landscape */
  #sheet{ max-width:min(720px, 92vw); left:50%; transform:translateX(-50%); }
}

/* Prüf-Animationen */
.test-anim{ will-change: transform, opacity; }
.out-up   { animation: outUp 220ms ease forwards; }
.out-down { animation: outDown 220ms ease forwards; }
.in-fade  { animation: inFade 180ms ease both; }
@keyframes outUp   { to { transform: translateY(-48px); opacity: 0; } }
@keyframes outDown { to { transform: translateY( 48px); opacity: 0; } }
@keyframes inFade  { from { opacity:0; transform: translateY(6px); }
                     to   { opacity:1; transform: translateY(0); } }

/* A11y */
.sr-only{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
